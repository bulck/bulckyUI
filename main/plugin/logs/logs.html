<script>
   $("[title]").tooltip({ 
        position: { my: "left+20 center-30", at: "right+15 center-10" },
        close: function (event, ui) {
            ui.tooltip.hover(
            function () {
                $(this).stop(true).fadeTo(300, 1);
            },    
            function () {
                $(this).fadeOut("300", function () {
                    $(this).remove();
                })
            });
        } 
    });
</script>
<br />
<label class="title_conf"><?php echo __('SELECT_LOG_TITLE'); ?></label>

<!-- Display buttons -->
<hr />
<br />
<br />
<div class="row">
     <div class="1u 12u(2)">
        <div class="box highlight">
        </div>
    </div>
    <div class="2u 12u(2)">
        <div class="box highlight">
            <a href="" id="button_parameters" name="button_parameters" title="<?php echo __('TOOLTIP_PARAMETERS_LOGS'); ?>"><i class="fa fa-2x fa-bars"></i></a>
        </div>
    </div>
    <div class="2u 12u(2)">
        <div class="box highlight">
             <a href="" id="curve_select_button" name="curve_select_button" title="<?php echo __('SELECT_CURVE_TO_DISPLAY'); ?>"><i class="fa fa-2x fa-area-chart"></i></a>
        </div>
    </div>
    <div class="2u 12u(2)">
        <div class="box highlight">
                 <a href="" id="database_management_button" name="database_management_button" title="<?php echo __('MANAGE_LOG_INFOS'); ?>"><i class="fa fa-2x fa-database"></i></a>
        </div>
    </div>
     <div class="2u 12u(2)">
        <div class="box highlight">
             <a href="/bulcky/index.php?menu=cost" id="cost" title="<?php echo __('COST_PRICE_COMPUTE'); ?>" class="href-cost"t><i class="fa fa-2x fa-euro"></i></a>
        </div>
    </div>
    <div class="2u 12u(2)">
        <div class="box highlight">
                <a href="" id="button_sensors_parameters" name="button_sensors_parameters" title="ParamÃ¨tres capteur"><i class="fa fa-2x fa-gear"></i></a>
        </div>
    </div>
    <div class="1u 12u(2)">
        <div class="box highlight">
        </div>
    </div>
</div>
<br />
<hr />
<br /><br />

<div id="label_select_type">
    <form name="display-log" id="display-log" action="/bulcky/index.php?menu=logs" method="get">
        <div class="row">
            <div class="2u 12u(2)">
                <div class="box highlight">
                </div>
            </div>
            <div class="3u 12u(2)">
                <div class="box"> <label class="subsub_title"><?php echo __('SELECT_DISPLAYED_DAY'); ?>:</label></div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> 
                    <input type= "radio" id="select_day" name="type" value="day" <?php if($type == "day") echo "checked"; ?> onChange="getType(0);" onLoad="getType(0);" ><?php echo __('ONE_DAY'); ?>
                    <input type= "radio" id="select_month" name="type" value="month" <?php if($type == "month") echo "checked"; ?> onChange="getType(1);" onLoad="getType(1);" ><?php echo __('ONE_MONTH'); ?>
                </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="3u 12u(2)">
                <div class="box highlight"> </div>
            </div>
        </div>

        <div class="row" id="label_select_day" style="<?php if(strcmp($type,"day")!=0) echo "display:none"; ?>">
            <div class="1u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box"> 
                    <?php echo __('SELECT_DAY'); ?>:
                </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight">
                     <input id="datepicker" name="startday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>">
                </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> </div>
                    <div id="error_start_days" style="display:none" class="error_field"><img src='main/libs/img/arrow_error.png' alt=''><?php echo __('ERROR_FORMAT_DATE_DAY'); ?></div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="1u 12u(2)">
                <div class="box highlight"> </div>
            </div>
        </div>

        
        <div class="row"  id="label_select_month" style="<?php if(strcmp($type,"day")==0) echo "display:none"; ?>" ?>
            <div class="1u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box">
                    <?php echo __('MONTH_DATE'); ?>:
                </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> 

                     <select name="startmonth" id="startmonth">
                       <option <?php if("$startmonth" == "1") { echo 'selected';} ?> value="01"><?php echo __('MONTH01'); ?></option>
                       <option <?php if("$startmonth" == "2") { echo 'selected';} ?> value="02"><?php echo __('MONTH02'); ?></option>
                       <option <?php if("$startmonth" == "3") { echo 'selected';} ?> value="03"><?php echo __('MONTH03'); ?></option>
                       <option <?php if("$startmonth" == "4") { echo 'selected';} ?> value="04"><?php echo __('MONTH04'); ?></option>
                       <option <?php if("$startmonth" == "5") { echo 'selected';} ?> value="05"><?php echo __('MONTH05'); ?></option>
                       <option <?php if("$startmonth" == "6") { echo 'selected';} ?> value="06"><?php echo __('MONTH06'); ?></option>
                       <option <?php if("$startmonth" == "7") { echo 'selected';} ?> value="07"><?php echo __('MONTH07'); ?></option>
                       <option <?php if("$startmonth" == "8") { echo 'selected';} ?> value="08"><?php echo __('MONTH08'); ?></option>
                       <option <?php if("$startmonth" == "9") { echo 'selected';} ?> value="09"><?php echo __('MONTH09'); ?></option>
                       <option <?php if("$startmonth" == "10") { echo 'selected';} ?> value="10"><?php echo __('MONTH10'); ?></option>
                       <option <?php if("$startmonth" == "11") { echo 'selected';} ?> value="11"><?php echo __('MONTH11'); ?></option>
                       <option <?php if("$startmonth" == "12") { echo 'selected';} ?> value="12"><?php echo __('MONTH12'); ?></option>
                    </select>

                    <?php
                         echo '<select name="startyear" id="startyear">';
                         $first = $GLOBALS['FIRST_LOG_YEAR'];
                         for($i = $first ; $i <= date('Y'); $i++) { ?>
                             <option <?php if($startyear == $i) { echo 'selected';} ?> value="<?php echo $i; ?>"><?php echo $i; ?></option>
                          <?php }
                          echo "</select>";
                    ?>

                </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> 
                      <div id="error_start_month" class="error_field" style="display:none"><img src='main/libs/img/arrow_error.png' alt=''><?php echo __('ERROR_FORMAT_DATE_MONTH'); ?></div>

                </div>
            </div>
            <div class="1u 12u(2)">
                <div class="box highlight"> </div>
            </div>
        </div>


        

          <div class="row">
            <div class="1u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box highlight"> </div>
            </div>
            <div class="2u 12u(2)">
                <div class="box">
                    <?php echo __('SELECT_SENSOR_NB'); ?>: 
                </div>
            </div>
            <div class="4u 12u(2)">
                <div class="box">
                      <table id="select_logs_to_display" class="table_width">
                        <tr>
                            <?php
                                $check_conf_sensor=false;
                                $count=0;

                                for($i = 1 ; $i <= $GLOBALS['NB_MAX_SENSOR_LOG'] ; $i++) {
                                    // Read sensor informations
                                    $sensorInfo = logs\get_sensor_db_type($i,$GLOBALS['SENSOR_DEFINITION']);
                                    if((strcmp($sensorInfo[0]['type'],"0")!=0)&&((strcmp($sensorInfo[0]['type'],"")!=0))) {
                                        $count=$count+1;
                                        echo '<td>' . __('SENSOR'). " " . $i . ' (' . __($sensorInfo[0]['translation']) . ')</td>';
                                        echo '<td  style="margin-right:30px;" >';
                                        echo '<input type="checkbox"'
                                            . ' name="select_sensor[]"'
                                            . ' sensor="' . $i . '"'
                                            . ' startDate="' . $legend_date . '"'
                                            . ' datatype = "logs"'
                                            . ' sensortype = "'.$sensorInfo[0]['type'].'"'
                                            . ' yAxis = ""'
                                            . ' serieID=""'
                                            . ' value="'.$i.'"'
                                            . ' id="sensor'.$i.'"';

                                        if(in_array($i,$select_sensor))
                                        {
                                            echo ' checked';
                                        }
                                        echo '>';
                                        echo '</td><td style="width:10%;"></td>';

                                        // Add a line every two sensors
                                        if($i % 2 == 0) {
                                            echo '</tr><tr>' ;
                                        }

                                    }
                                }

                                if($count==0) {
                                        echo "<b>".__('NO_SENSOR_DEFINED').'</b><img src="main/libs/img/infos.png" alt="" title="'.__('TOOLTIP_NO_SENSOR_DEFINED').'" />';
                                } else if($count==1) {
                                    echo '<td style="width:45%;"></td><td></td><td></td>';
                                }
                            ?>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="1u 12u(2)">
                <div class="box highlight">
                </div>
            </div>
        </div>


        <!-- Display button to display -->
        <p class="p_center"><input type="submit" style="<?php if($type == "day") { echo 'display:none'; } ?>" value=<?php echo __('VIEW'); ?> name="display-log-submit" id="display-log-submit" ></p>
        
        <input type="hidden" name="import_load" id="import_load" value="<?php echo $import_load; ?>">
        <input type="hidden" name="reload_import" id="reload_import" value="0">
        <input type="hidden" name="select_program" value="">
        <input type="hidden" name="select_sensor" value="1">
        <input type="hidden" name="select_power" value="">
    </form>
</div>
<hr />
<br />
<br />

<div class="row">
    <div class="2u 12u(2)">
        <div class="box highlight">
            <div class="center_verti">
              <form action="/bulcky/index.php?menu=logs" method="get" name="previous" id="previous-form">
                <input type="submit" value="<" name="previous" id="previous" class="button_log" title="<?php if(strcmp($type,"day")==0) echo __('PREVIOUS_BUTTON_DAY'); else echo __('PREVIOUS_BUTTON_MONTH'); ?>">
                <?php if($type == "day") { ?>
                    <input type="hidden" name="startday" value="<?php echo date('Y-m-d',strtotime("-1 day", strtotime("$startday"))); ?>">
                <?php } else {
                        if("$startmonth" == "01") {
                            $month="12";
                         } else {
                            $month=$startmonth-1;
                            if(strlen($month)<2) {
                                $month="0$month";
                            }
                        }
                    ?>
                    <input type="hidden" name="startmonth" value="<?php echo "$month"; ?>">
                    <input type="hidden" name="startyear" value="<?php if(strcmp("$startmonth","01")==0) echo $startyear-1; else echo $startyear; ?>">
                    <input type="hidden" name="type" value="month">
                <?php } ?>
                <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
                <input type="hidden" name="select_program" value="">
                <input type="hidden" name="select_sensor" value="1">
                <input type="hidden" name="select_power" value="">
            </form>
            </div>
        </div>
    </div>
    <div class="8u 12u(2)">
        <div class="box highlight">
              <?php
                    echo '<img id="regul_and_minmax_summary" src="main/libs/img/resume.png" alt="" title="';
                    if(count($resume_regul)>0) {
                        foreach($resume_regul as $res_regul) {
                            echo $res_regul;
                        }
                    }
                    echo '" />';
      ?>
       <div id="container" style="min-width:600px;"></div>
        </div>
    </div>
    <div class="2u 12u(2)">
        <div class="box highlight">
             <?php
                 $dd=date('d');
                 $yy=date('Y');
                 $mm=date('m');
            ?>
            <div class="center_verti">
            <form action="/bulcky/index.php?menu=logs" method="get" name="next" id="next-form">
                <input type="submit" value=">" name="next" id="next" class="button_log" title="<?php if(strcmp($type,"day")==0) echo __('NEXT_BUTTON_DAY'); else echo __('NEXT_BUTTON_MONTH'); ?>">
                <?php if(strcmp($type,"day")==0) { ?>
                    <input type="hidden" name="startday" value="<?php echo date('Y-m-d',strtotime("+1 day", strtotime("$startday"))); ?>">
                <?php } else { ?>
                    <?php
                        if($startmonth == "12") {
                                $month="01";
                         } else {
                                $month=$startmonth+1;
                                if(strlen($month)<2) {
                                    $month="0$month";
                                }
                        }
                    ?>
                    <input type="hidden" name="startmonth" value="<?php echo "$month"; ?>">
                    <input type="hidden" name="startyear" value="<?php if(strcmp("$startmonth","12")==0) echo $startyear+1; else echo $startyear; ?>" >
                    <input type="hidden" name="type" value="month">
                <?php } ?>

                <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
                <input type="hidden" name="select_program" value="">
                <input type="hidden" name="select_sensor" value="1">
                <input type="hidden" name="select_power" value="">
            </form>
            </div>
        </div>
    </div>
</div>

<p class="p_center"><input type="submit" id="resetXzoom" name="buttonX" style="display:none" class="button_log" value="<?php echo __('RESET_ZOOM_TITLE'); ?>"></p>



<div id="delete_log_form" title="<?php echo __('MANAGE_RESET_TITLE'); ?>" style="display:none">
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('DELETE_ALL_LOGS'); ?>:</b></td>
            <td><input id="check_delete_all" name="check_type_delete" type="radio" value="all" checked/></td>
        </tr>
    </table>
    <br />
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('DELETE_SPECIFIC_LOGS'); ?>:</b></td>
            <td><input id="check_delete_specific" name="check_type_delete" type="radio" value="specific"/></td>
        </tr>
    </table>
    <div id="div_delete_specific" style="display:none">
    <br />
    <hr />
    <br />
    <table class="table_width">
        <tr>
            <td class="field_delete_form"><?php echo __('DELETE_LOGS_FROM'); ?>: <input id="datepicker_from" name="delete_startday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"><?php echo __('DELETE_LOGS_TO'); ?>: <input id="datepicker_to" name="delete_endday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"></td>
            <td></td>
        </tr>
    </table>
    </div>

    <br />
    <br />
    <p class="p_center">
        <label class="format_error" id="error_format_date_logs" style="display:none"><?php echo __('ERROR_FORMAT_DATE'); ?></label>
    </p>

    <div id="progress_delete_logs" style="display:none">
        <p><?php echo __('DELETE_PROGRESS'); ?>:</p>
        <div id="progress_bar_delete_logs"></div>
        <br />
        <p class="p_center">
            <label class="format_success" id="success_delete_logs" style="display:none"><?php echo __('VALID_DELETE_LOGS'); ?></label>
            <label class="format_error" id="error_delete_logs" style="display:none"><?php echo __('ERROR_DELETE_LOGS'); ?></label>
        </p>
    </div>
</div>


<div id="delete_log_form_power" title="<?php echo __('MANAGE_RESET_TITLE_POWER'); ?>" style="display:none">
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('DELETE_ALL_LOGS'); ?>:</b></td>
            <td><input id="check_delete_all_power" name="check_type_delete_power" type="radio" value="all" checked/></td>
        </tr>
    </table>
    <br />
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('DELETE_SPECIFIC_LOGS'); ?>:</b></td>
            <td><input id="check_delete_specific_power" name="check_type_delete_power" type="radio" value="specific"/></td>
        </tr>
    </table>
    <div id="div_delete_specific_power" style="display:none">
        <br />
        <hr />
        <br />
        <table class="table_width">
            <tr>
                <td class="field_delete_form"><?php echo __('DELETE_LOGS_FROM'); ?>: <input id="datepicker_from_power" name="delete_startday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"><?php echo __('DELETE_LOGS_TO'); ?>: <input id="datepicker_to_power" name="delete_endday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"></td>
                <td></td>
            </tr>
        </table>
    </div>

    <br />
    <br />

    <p class="p_center">
    <label class="format_error" id="error_format_date_logs_power" style="display:none"><?php echo __('ERROR_FORMAT_DATE'); ?></label>
    </p>

    <div id="progress_delete_logs_power" style="display:none">
        <p><?php echo __('DELETE_PROGRESS'); ?>:</p>
        <div id="progress_bar_delete_logs_power"></div>
        <br />
        <p class="p_center">
        <label class="format_success" id="success_delete_logs_power" style="display:none"><?php echo __('VALID_DELETE_LOGS'); ?></label>
        <label class="format_error" id="error_delete_logs_power" style="display:none"><?php echo __('ERROR_DELETE_LOGS'); ?></label>
        </p>
    </div>
</div>

<!-- Div used to dislay curve to show -->
<div id="select_curve" title="<?php echo __('PARAMETERS_CURVE_DISPLAYED') ?>" style="display:none">
    <!-- Programm curve selection -->
    <div id="select_program_curve">
        <p>
            <b><?php echo __('SELECT_PROGRAM_PLUG') ?> : </b>
            <img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_LOG_PROGRAM'); ?>" />
        </p>
        <table id="select_plug_program_on_day" class="table_width">
                <tr>
            <?php 
                for($plugs=1;$plugs<=$nb_plugs;$plugs++) {
                    echo '<td class="log-div-margin-param"></td>';
                    $plugArrayTranslate =  translate_PlugType($plugs_infos[$plugs - 1]['PLUG_TYPE']);
                    echo '<td>' . $plugs_infos[$plugs-1]["PLUG_NAME"] . " (" . $plugArrayTranslate . ")</td>";
                    echo '<td><input type="checkbox" style="margin-right:30px;"'
                        . ' plug="' . $plugs . '"' 
                        . ' startDate="' . $legend_date . '"'
                        . ' name="select_program[]"'
                        . ' datatype = "program"'
                        . ' yAxis = ""'
                        . ' serieID=""'
                        . ' curvename="' . $plugs_infos[$plugs-1]["PLUG_NAME"] . '"'
                        . ' id="plug_display'.$plugs.'"'
                        . ' value="' . $plugs . '" ';
                    if(in_array($plugs,$select_program)) {
                        echo ' checked';
                    }
                    echo '></td>';

                    if($plugs % 3 == 0) { 
                        echo '<td class="log-div-margin-param"></td></tr><tr>';
                    }
                } 

                $tmp_cnt=$nb_plugs % 3;
                for($i=0;$i<3-$tmp_cnt;$i++) { ?>
                    <td></td>
                <?php } ?>
            </tr>
        </table>
    </div>
    <br /><br />
    <!-- Power curve selection -->
    <div id="select_power_curve">
        <p>
            <b><?php echo __('SELECT_POWER_PLUG'); ?> : </b>
            <img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_POWER_LOG'); ?>" />
        </p>
        <table id="select_power_on_day" class="table_width">
            <tr>
            <?php 
                for($plugs=1;$plugs<=$nb_plugs;$plugs++) {  
                    echo '<td class="log-div-margin-param"></td>';
                    $plugArrayTranslate =  translate_PlugType($plugs_infos[$plugs - 1]['PLUG_TYPE']);
                    echo '<td>' . $plugs_infos[$plugs-1]["PLUG_NAME"] . " (" . $plugArrayTranslate . ")</td>";
                    echo '<td><input type="checkbox" style="margin-right:30px;"'
                        . ' plug="' . $plugs . '"' 
                        . ' startDate="' . $legend_date . '"'
                        . ' name="select_power[]"'
                        . ' datatype = "power"'
                        . ' yAxis = ""'
                        . ' serieID=""'
                        . ' id="power_display'.$plugs.'"'
                        . ' value="' . $plugs . '"';
                    if(in_array($plugs,$select_power)) {
                        echo ' checked'; 
                    }
                    echo '> </td>';

                    if($plugs % 3 == 0) { 
                        echo '<td class="log-div-margin-param"></td></tr><tr>';
                    }
                }

                $tmp_cnt=$nb_plugs % 3;
                for($i=0;$i<3-$tmp_cnt;$i++) { ?>
                    <td></td>
                <?php } ?>
            </tr>
        </table>
    </div>
</div>

<!-- Div used for parameters -->
<div id="ui_parameters" name="ui_parameters" title="<?php echo __('PARAMETERS_LOGS_TITLE') ?>" style="display:none">
    <table class="table_width">
        <tr>
            <td>
                <?php echo __('CONFIGURE_TEMPERATURE'); ?>:
            </td>
            <td>
                <select name="color_temperature_graph" curveType="temperature" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_temperature) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo __('CONFIGURE_HUMIDITY'); ?>:
            </td>
            <td>
                <select name="color_humidity_graph" curveType="humidity" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_humidity) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo __('CONFIGURE_WATER'); ?>:
            </td>
            <td>
                <select name="color_water_graph" curveType="water" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_water) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo __('CONFIGURE_LEVEL'); ?>:
            </td>
            <td>
                <select name="color_level_graph" curveType="level" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_level) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo __('CONFIGURE_PH'); ?>:
            </td>
            <td>
                <select name="color_ph_graph" curveType="ph" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_ph) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo __('CONFIGURE_EC'); ?>:
            </td>
            <td>
                <select name="color_ec_graph" curveType="ec" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_ec) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo __('CONFIGURE_OD'); ?>:
            </td>
            <td>
                <select name="color_od_graph" curveType="od" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_od) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
        <tr>
            <td>
                <?php echo __('CONFIGURE_ORP'); ?>:
            </td>
            <td>
                <select name="color_orp_graph" curveType="orp" >
                <?php 
                    foreach($GLOBALS['LIST_GRAPHIC_COLOR'] as $value) {
                        $color_lang = "COLOR_" . strtoupper($value);
                        if($value == $color_orp) {
                            echo "<option value=\"" . $value . "\" selected >" . __($color_lang) . "</option>";
                        } 
                        else
                        {
                            echo "<option value=\"" . $value . "\" >" . __($color_lang) . "</option>";
                        }
                    }
                ?>
                </select>
            </td>
        </tr>
    </table>
</div>

<!-- Div used for database management -->
<div id="ui_db_management" name="ui_db_management" title="<?php echo __('MANAGE_LOG_INFOS') ?>" style="display:none">
    <!-- Reset logs -->
    <form action="/bulcky/index.php?menu=logs" method="get" id="reset_log_form" name="reset_log_form">
        <table class="table_width">
            <tr>
                <td class="log-manage-marge"></td>
                <td class="log-manage-title"><?php echo __('MANAGE_RESET_TITLE'); ?><img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_RESET_LOG'); ?>" /></td>
                <td class="log-manage-field"><input type="submit" id="reset_log_submit" name="reset_log_submit" <?php if(!$check_log) { echo 'disabled'; ?> class="inputDisable" value="<?php echo __('MANAGE_EXPORT_EMPTY_LOG_CSV'); ?>" <?php } else { ?>value="<?php echo __('MANAGE_RESET_LOG'); ?>" <?php } ?>></td>
                <td></td>
            </tr>
        </table>
    </form>

    <!-- Export CSV logs -->
    <form action="/bulcky/index.php?menu=logs" method="get" name="export_log_form" id="export_log_form">
        <table class="table_width">
            <tr>
                <td class="log-manage-marge"></td>
                <td class="log-manage-title"><?php echo __('MANAGE_EXPORT_LOG_CSV'); ?><img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_EXPORT_LOG_CSV'); ?>" /></td>
                <td class="log-manage-field">
                    <input type="submit" id="export_log" name="export_log" <?php if(!$check_log) { echo 'disabled'; ?> class="inputDisable" value="<?php echo __('MANAGE_EXPORT_EMPTY_LOG_CSV'); ?>" <?php } else { ?> value="<?php echo __('MANAGE_EXPORT_LOG_CSV_BUTTON'); ?>"<?php } ?>>
                </td>
                <td></td>
            </tr>
        </table>
        <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
        <?php if($type == "month") { ?>
            <input type="hidden" name="startmonth" value="<?php echo $startmonth; ?>">
            <input type="hidden" name="startyear" value="<?php echo $startyear; ?>" >
        <?php } else { ?>
            <input type="hidden" name="startday" value="<?php echo $startday; ?>">
        <?php } ?>
    </form>

    <!-- Import logs from csv -->
    <form action="/bulcky/index.php?menu=logs" method="get" name="import_log_csv" id="import_log_csv">
        <table class="table_width">
            <tr>
                <td class="log-manage-marge"></td>
                <td class="log-manage-title"><?php echo __('MANAGE_IMPORT_LOG_CSV'); ?><img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_IMPORT_LOG_CSV'); ?>" /></td>
                <td class="log-manage-field"><input type="file" id="import_logs_csv_file" name="files[]"></td>
                <td></td>
            </tr>
        </table>
        <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
        <?php if($type == "month") { ?>
            <input type="hidden" name="startmonth" value="<?php echo $startmonth; ?>">
            <input type="hidden" name="startyear" value="<?php echo $startyear; ?>" >
        <?php } else { ?>
            <input type="hidden" name="startday" value="<?php echo $startday; ?>">
        <?php } ?>
    </form> 

    <!-- Delete power logs -->
    <form action="/bulcky/index.php?menu=logs" method="get" id="reset_log_power_form" name="reset_log_power_form">
        <table class="table_width">
            <tr>
                <td class="log-manage-marge"></td>
                <td class="log-manage-title"><?php echo __('MANAGE_RESET_TITLE_POWER'); ?><img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_RESET_LOG'); ?>" /></td>
                <td class="log-manage-field"><input type="submit" id="reset_log_power_submit" name="reset_log_power_submit" <?php if(!$check_power) { echo 'disabled'; ?> class="inputDisable" value="<?php echo __('MANAGE_EXPORT_EMPTY_POWER_CSV'); ?>" <?php } else { ?> value="<?php echo __('MANAGE_RESET_POWER'); ?>" <?php } ?>></td>
                <td></td>
            </tr>
        </table>
    </form>

    <!-- Export power csv -->
    <form action="/bulcky/index.php?menu=logs" method="get" id="export_log_power_form" name="export_log_power_form">
        <table class="table_width">
            <tr>
                <td class="log-manage-marge"></td>
                <td class="log-manage-title"><?php echo __('MANAGE_EXPORT_POWER_CSV'); ?><img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_EXPORT_POWER_CSV'); ?>" /></td>
                <td class="log-manage-field">
                    <input type="submit" id="export_log_power" name="export_log_power"  <?php if(!$check_power) { echo 'disabled'; ?> class="inputDisable" value="<?php echo __('MANAGE_EXPORT_EMPTY_POWER_CSV'); ?>" <?php } else { ?>  value="<?php echo __('MANAGE_EXPORT_POWER_CSV_BUTTON'); ?>"<?php } ?>>
                </td>
                <td></td>
            </tr>
        </table>
        <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
        <?php if($type == "month") { ?>
            <input type="hidden" name="startmonth" value="<?php echo $startmonth; ?>">
            <input type="hidden" name="startyear" value="<?php echo $startyear; ?>" >
        <?php } else { ?>
            <input type="hidden" name="startday" value="<?php echo $startday; ?>">
        <?php } ?>
    </form>

    <!-- Import logs from csv -->
    <form action="/bulcky/index.php?menu=logs" method="get" name="import_log_power_csv" id="import_log_power_csv">
        <table class="table_width">
            <tr>
                <td class="log-manage-marge"></td>
                <td class="log-manage-title"><?php echo __('MANAGE_IMPORT_LOG_POWER_CSV'); ?><img src="main/libs/img/infos.png" alt="" title="<?php echo __('TOOLTIP_IMPORT_LOG_POWER_CSV'); ?>" /></td>
                <td class="log-manage-field"><input type="file" id="import_logs_power_csv_file" name="files[]"></td>
                <td></td>
            </tr>
        </table>
        <input type="hidden" name="select_plug" value="<?php echo $select_plug; ?>">
        <?php if($type == "month") { ?>
            <input type="hidden" name="startmonth" value="<?php echo $startmonth; ?>">
            <input type="hidden" name="startyear" value="<?php echo $startyear; ?>" >
        <?php } else { ?>
            <input type="hidden" name="startday" value="<?php echo $startday; ?>">
        <?php } ?>
    </form>
</div>

<div id="preparing-file-modal" title="" style="display: none;"><?php echo __('PREPARING_EXPORT'); ?><img src="main/libs/img/waiting_small.gif" /></div>

<div id="export_log_div" title="<?php echo __('MANAGE_EXPORT_LOG_CSV_BUTTON'); ?>" style="display:none">
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('EXPORT_ALL_LOGS'); ?>:</b><br /></td>
            <td><input id="check_export_all_logs" name="check_type_export_logs" type="radio" value="all" checked/></td>
        </tr>
    </table>
    <br />
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('EXPORT_SPECIFIC_LOGS'); ?>:</b></td>
            <td><input id="check_export_specific_logs" name="check_type_export_logs" type="radio" value="specific"/></td>
        </tr>
    </table>
    <div id="div_export_specific" style="display:none">
        <br />
        <hr />
        <br />
        <table class="table_width">
            <tr>
                <td class="field_delete_form"><?php echo __('EXPORT_LOGS_FROM'); ?>: <input id="datepicker_export_from" name="export_startday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"><?php echo __('DELETE_LOGS_TO'); ?>: <input id="datepicker_export_to" name="delete_endday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"></td>
                <td></td>
            </tr>
        </table>
    </div>

    <br />
    <br />

    <p class="p_center">
    <label class="format_error" id="error_format_date_logs_export" style="display:none"><?php echo __('ERROR_FORMAT_DATE'); ?></label>
    </p>
</div>


<div id="export_log_power_div" title="<?php echo __('MANAGE_EXPORT_POWER_CSV_BUTTON'); ?>" style="display:none">
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('EXPORT_ALL_LOGS'); ?>:</b></td>
            <td><input id="check_export_all_power" name="check_type_export_power" type="radio" value="all" checked/></td>
        </tr>
    </table>
    <br />
    <table class="table_width">
        <tr>
            <td class="delete_message_border"><b><?php echo __('EXPORT_SPECIFIC_LOGS'); ?>:</b></td>
            <td><input id="check_export_specific_power" name="check_type_export_power" type="radio" value="specific"/></td>
        </tr>
    </table>
    <div id="div_export_specific_power" style="display:none">
        <br />
        <hr />
        <br />
        <table class="table_width">
            <tr>
                <td class="field_delete_form"><?php echo __('EXPORT_LOGS_FROM'); ?>: <input id="datepicker_export_power_from" name="export_power_startday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"><?php echo __('DELETE_LOGS_TO'); ?>: <input id="datepicker_export_power_to" name="export_power_endday" type="text" class="whitefield" size="10" value="<?php echo $startday; ?>"></td>
                <td></td>
            </tr>
        </table>
    </div>

    <br />
    <br />

    <p class="p_center">
    <label class="format_error" id="error_format_date_logs_power_export" style="display:none"><?php echo __('ERROR_FORMAT_DATE'); ?></label>
    </p>
</div>


<div id="data_logs" style="display:none">
</div>

<div id="progress_csv">
    <div id="progress_bar_csv" class="bar" style="width: 0%;"></div>
    <p class="p_center" id="progress_purcent"></p>
</div>


<div id="success_import_logs" title="<?php echo __('IMPORT_LOGS'); ?>" style="display:none">
    <p><?php echo __('SUCCESS_IMPORT_LOGS'); ?></p>
</div>


<div id="error_import_logs" title="<?php echo __('IMPORT_LOGS'); ?>" style="display:none">
    <p><?php echo __('ERROR_IMPORT_LOGS'); ?></p>
</div>

<div id="error_power_logs" title="<?php echo __('ERROR_POWER_EMPTY'); ?>" style="display:none">
    <p><?php echo __('EMPTY_POWER_DESC'); ?>:</p>
    <table class="table_width">
        <tr>
            <td></td>
            <td>
                <?php echo __('POWER_PLUG'); ?>:<img src="main/libs/img/infos.png" alt=""  title="<?php echo __('TOOLTIP_POWER'); ?>" />
            </td>
            <td>
                <input type="text" size="4" maxlength="4" id="plug_power" name="plug_power" value="" onKeypress="return verifInt(event);">W
            </td>
            <td><div id="error_power_value" class='error_field' style="display:none"><img src='main/libs/img/arrow_error.png' alt='->'><?php echo __('ERROR_POWER_VALUE'); ?></div></td>
        </tr>
    </table>
</div>

<!-- Div used for selecting sensor type -->
<div id="ui_sensors_parameters" name="ui_sensors_parameters" title="ParamÃ¨tres capteurs" style="display:none">
    <table class="table_width">
        <tr>
            <th></th>
            <th>Nom</th>
            <th>Type</th>
            <th>Source</th>
        <tr>
        <?php
            // Retriev sensor infos 
            $sensorList = \sensors\getDB();
            
            // foreach sensor, get type and position
            foreach ($sensorList as $index => $sensor){
            
                $sensorNum = $sensor["id"];
            
                ?>
                <tr>
                    <td>
                        <p> <?php echo __('SENSOR') . " " . $sensorNum; ?> : </p>
                    </td>
                    <td class="step">
                        <input type="text" id="ui_sensors_parameters_tableSensor_name_<?php echo $sensorNum; ?>" value="<?php echo $sensor["name"]; ?>" size="10" />
                    </td>
                    <td class="step">
                        <select id="ui_sensors_parameters_tableSensor_type_<?php echo $sensorNum; ?>" >
                            <?php foreach($GLOBALS['SENSOR_DEFINITION'] as $sensor_def) {  ?>
                                <option value="<?php echo $sensor_def['type']; ?>" <?php if(strcmp($sensor['type'],$sensor_def['type'])==0) echo 'selected'; ?> > <?php echo __("${sensor_def['translation']}"); ?> </option>
                            <?php } ?>
                        </select>
                    </td>
                    <td class="step">
                        <select id="ui_sensors_parameters_tableSensor_source_<?php echo $sensorNum; ?>" >
                            <?php foreach($GLOBALS['SENSOR_READ_TYPE'] as $read) { ?>
                                <option value="<?php echo $read['value']; ?>" <?php if(strcmp($sensor['source'],$read['value'])==0) echo 'selected'; ?> ><?php echo __("${read['display']}"); ?></option>
                            <?php } ?>
                        </select>
                        
                        <?php
                            if(strcmp($sensor['source'],"directread")==0)
                            {
                        ?>
                                <input type="image" id="button_sensors_parameters_direct_read_<?php echo $sensorNum; ?>"
                                    name="button_sensors_parameters_direct_read"
                                    title="ParamÃ¨tres capteur"
                                    src="main/libs/img/add.png" 
                                    alt="sensors_parameters"
                                />
                        <?php
                            }
                        ?>
                    </td>
                </tr>

                <?php
            
            }
        ?>
    </table>
</div>

<!-- Div used for displaying parameters for direct read -->
<div id="ui_sensors_parameters_direct_read" name="ui_sensors_parameters_direct_read" title="ParamÃ¨tres capteurs" style="display:none">
    <table id="ui_sensors_parameters_direct_read_table" class="table_width">
    </table>
</div>
